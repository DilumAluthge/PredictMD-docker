############################################################################

branches:
    only:
    - develop
    - master
    - staging
    - trying
    - /^release\/.*$/ # release branches
    - /^v[0-9]+\.[0-9]+\.[0-9]+$/ # version tags

env:
    global:
        - DOCUMENTER_DEBUG="true"
        - DOCKER_IMAGE_OWNER="dilumaluthge"
        - JULIA_DEBUG="all"
        - PREDICTMD_OPEN_PLOTS_DURING_TESTS="true"

git:
    depth: 99999999

language: bash

matrix:
    fast_finish: true

notifications:
    email:
        on_failure: always
        on_success: never
os:
    - linux

services:
    - docker

############################################################################

before_install:
    - true
install:
    - true
before_script:
    - true
script:
    - true
after_script:
    - true

############################################################################

stages:
    - "Stage 1 (tex)"
    - "Stage 2 (julia)"
    - "Stage 3 (predictmd)"

############################################################################

jobs:
    include:
        - stage: "Stage 1 (tex)"
          name: "dilumaluthge/latex_for_plotting"
          env:
              - IMAGE="latex_for_plotting"
              - FOLDER="tex"
          script: ./ci/travis/script.sh
        - stage: "Stage 2 (julia)"
          name: "dilumaluthge/julia1.1"
          env:
              - IMAGE="julia1.1"
              - FOLDER="julia"
          script: ./ci/travis/script.sh

        - stage: "Stage 3 (predictmd)"
          name: "dilumaluthge/predictmd_stable"
          env:
              - IMAGE="predictmd_stable"
              - FOLDER="predictmd"
          script: true
        - stage: "Stage 3 (predictmd)"
          name: "dilumaluthge/predictmd_unstable"
          env:
              - IMAGE="predictmd_unstable"
              - FOLDER="predictmd"
          script: ./ci/travis/script.sh

############################################################################
